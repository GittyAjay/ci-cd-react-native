15a65828f242d6ce1a159a52f19ca40f
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = HeaderConfig;

var _elements = require("@react-navigation/elements");

var _native = require("@react-navigation/native");

var React = _interopRequireWildcard(require("react"));

var _reactNative = require("react-native");

var _reactNativeSafeAreaContext = require("react-native-safe-area-context");

var _reactNativeScreens = require("react-native-screens");

var _FontProcessor = require("./FontProcessor");

function _getRequireWildcardCache(nodeInterop) {
  if (typeof WeakMap !== "function") return null;
  var cacheBabelInterop = new WeakMap();
  var cacheNodeInterop = new WeakMap();
  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {
    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
  })(nodeInterop);
}

function _interopRequireWildcard(obj, nodeInterop) {
  if (!nodeInterop && obj && obj.__esModule) {
    return obj;
  }

  if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
    return {
      default: obj
    };
  }

  var cache = _getRequireWildcardCache(nodeInterop);

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

  for (var key in obj) {
    if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }

  newObj.default = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

function HeaderConfig(_ref) {
  var _ref2, _headerTitleStyleFlat, _headerStyleFlattened;

  var headerHeight = _ref.headerHeight,
      headerBackImageSource = _ref.headerBackImageSource,
      headerBackButtonMenuEnabled = _ref.headerBackButtonMenuEnabled,
      headerBackTitle = _ref.headerBackTitle,
      headerBackTitleStyle = _ref.headerBackTitleStyle,
      _ref$headerBackTitleV = _ref.headerBackTitleVisible,
      headerBackTitleVisible = _ref$headerBackTitleV === void 0 ? true : _ref$headerBackTitleV,
      headerBackVisible = _ref.headerBackVisible,
      headerShadowVisible = _ref.headerShadowVisible,
      headerLargeStyle = _ref.headerLargeStyle,
      headerLargeTitle = _ref.headerLargeTitle,
      headerLargeTitleShadowVisible = _ref.headerLargeTitleShadowVisible,
      headerLargeTitleStyle = _ref.headerLargeTitleStyle,
      headerBackground = _ref.headerBackground,
      headerLeft = _ref.headerLeft,
      headerRight = _ref.headerRight,
      headerShown = _ref.headerShown,
      headerStyle = _ref.headerStyle,
      headerBlurEffect = _ref.headerBlurEffect,
      headerTintColor = _ref.headerTintColor,
      headerTitle = _ref.headerTitle,
      headerTitleAlign = _ref.headerTitleAlign,
      headerTitleStyle = _ref.headerTitleStyle,
      headerTransparent = _ref.headerTransparent,
      headerSearchBarOptions = _ref.headerSearchBarOptions,
      route = _ref.route,
      title = _ref.title,
      canGoBack = _ref.canGoBack;
  var insets = (0, _reactNativeSafeAreaContext.useSafeAreaInsets)();

  var _ref3 = (0, _native.useTheme)(),
      colors = _ref3.colors;

  var tintColor = headerTintColor !== null && headerTintColor !== void 0 ? headerTintColor : _reactNative.Platform.OS === 'ios' ? colors.primary : colors.text;
  var headerBackTitleStyleFlattened = _reactNative.StyleSheet.flatten(headerBackTitleStyle) || {};
  var headerLargeTitleStyleFlattened = _reactNative.StyleSheet.flatten(headerLargeTitleStyle) || {};
  var headerTitleStyleFlattened = _reactNative.StyleSheet.flatten(headerTitleStyle) || {};
  var headerStyleFlattened = _reactNative.StyleSheet.flatten(headerStyle) || {};
  var headerLargeStyleFlattened = _reactNative.StyleSheet.flatten(headerLargeStyle) || {};

  var _ref4 = (0, _FontProcessor.processFonts)([headerBackTitleStyleFlattened.fontFamily, headerLargeTitleStyleFlattened.fontFamily, headerTitleStyleFlattened.fontFamily]),
      _ref5 = (0, _slicedToArray2.default)(_ref4, 3),
      backTitleFontFamily = _ref5[0],
      largeTitleFontFamily = _ref5[1],
      titleFontFamily = _ref5[2];

  var titleText = (0, _elements.getHeaderTitle)({
    title: title,
    headerTitle: headerTitle
  }, route.name);
  var titleColor = (_ref2 = (_headerTitleStyleFlat = headerTitleStyleFlattened.color) !== null && _headerTitleStyleFlat !== void 0 ? _headerTitleStyleFlat : headerTintColor) !== null && _ref2 !== void 0 ? _ref2 : colors.text;
  var titleFontSize = headerTitleStyleFlattened.fontSize;
  var titleFontWeight = headerTitleStyleFlattened.fontWeight;
  var headerTitleStyleSupported = {
    color: titleColor
  };

  if (headerTitleStyleFlattened.fontFamily != null) {
    headerTitleStyleSupported.fontFamily = headerTitleStyleFlattened.fontFamily;
  }

  if (titleFontSize != null) {
    headerTitleStyleSupported.fontSize = titleFontSize;
  }

  if (titleFontWeight != null) {
    headerTitleStyleSupported.fontWeight = titleFontWeight;
  }

  var headerLeftElement = headerLeft === null || headerLeft === void 0 ? void 0 : headerLeft({
    tintColor: tintColor,
    canGoBack: canGoBack,
    label: headerBackTitle
  });
  var headerRightElement = headerRight === null || headerRight === void 0 ? void 0 : headerRight({
    tintColor: tintColor,
    canGoBack: canGoBack
  });
  var headerTitleElement = typeof headerTitle === 'function' ? headerTitle({
    tintColor: tintColor,
    children: titleText
  }) : null;
  var supportsHeaderSearchBar = typeof _reactNativeScreens.isSearchBarAvailableForCurrentPlatform === 'boolean' ? _reactNativeScreens.isSearchBarAvailableForCurrentPlatform : _reactNative.Platform.OS === 'ios' && _reactNativeScreens.SearchBar != null;
  var hasHeaderSearchBar = supportsHeaderSearchBar && headerSearchBarOptions != null;

  if (headerSearchBarOptions != null && !supportsHeaderSearchBar) {
    throw new Error("The current version of 'react-native-screens' doesn't support SearchBar in the header. Please update to the latest version to use this option.");
  }

  var backButtonInCustomView = headerBackVisible ? headerLeftElement != null : _reactNative.Platform.OS === 'android' && headerTitleElement != null;
  var translucent = headerBackground != null || headerTransparent || (hasHeaderSearchBar || headerLargeTitle) && _reactNative.Platform.OS === 'ios' && headerTransparent !== false;
  return React.createElement(React.Fragment, null, headerBackground != null ? React.createElement(_reactNative.View, {
    style: [styles.background, headerTransparent ? styles.translucent : null, {
      height: headerHeight
    }]
  }, headerBackground()) : null, React.createElement(_reactNativeScreens.ScreenStackHeaderConfig, {
    backButtonInCustomView: backButtonInCustomView,
    backgroundColor: (_headerStyleFlattened = headerStyleFlattened.backgroundColor) !== null && _headerStyleFlattened !== void 0 ? _headerStyleFlattened : headerBackground != null || headerTransparent ? 'transparent' : colors.card,
    backTitle: headerBackTitleVisible ? headerBackTitle : ' ',
    backTitleFontFamily: backTitleFontFamily,
    backTitleFontSize: headerBackTitleStyleFlattened.fontSize,
    blurEffect: headerBlurEffect,
    color: tintColor,
    direction: _reactNative.I18nManager.getConstants().isRTL ? 'rtl' : 'ltr',
    disableBackButtonMenu: headerBackButtonMenuEnabled === false,
    hidden: headerShown === false,
    hideBackButton: headerBackVisible === false,
    hideShadow: headerShadowVisible === false || headerBackground != null || headerTransparent,
    largeTitle: headerLargeTitle,
    largeTitleBackgroundColor: headerLargeStyleFlattened.backgroundColor,
    largeTitleColor: headerLargeTitleStyleFlattened.color,
    largeTitleFontFamily: largeTitleFontFamily,
    largeTitleFontSize: headerLargeTitleStyleFlattened.fontSize,
    largeTitleFontWeight: headerLargeTitleStyleFlattened.fontWeight,
    largeTitleHideShadow: headerLargeTitleShadowVisible === false,
    title: titleText,
    titleColor: titleColor,
    titleFontFamily: titleFontFamily,
    titleFontSize: titleFontSize,
    titleFontWeight: titleFontWeight,
    topInsetEnabled: insets.top !== 0,
    translucent: translucent === true
  }, _reactNative.Platform.OS === 'ios' ? React.createElement(React.Fragment, null, headerLeftElement != null ? React.createElement(_reactNativeScreens.ScreenStackHeaderLeftView, null, headerLeftElement) : null, headerTitleElement != null ? React.createElement(_reactNativeScreens.ScreenStackHeaderCenterView, null, headerTitleElement) : null) : React.createElement(React.Fragment, null, headerLeftElement != null || typeof headerTitle === 'function' ? React.createElement(_reactNativeScreens.ScreenStackHeaderLeftView, null, React.createElement(_reactNative.View, {
    style: styles.row
  }, headerLeftElement, headerTitleAlign !== 'center' ? typeof headerTitle === 'function' ? headerTitleElement : React.createElement(_elements.HeaderTitle, {
    tintColor: tintColor,
    style: headerTitleStyleSupported
  }, titleText) : null)) : null, headerTitleAlign === 'center' ? React.createElement(_reactNativeScreens.ScreenStackHeaderCenterView, null, typeof headerTitle === 'function' ? headerTitleElement : React.createElement(_elements.HeaderTitle, {
    tintColor: tintColor,
    style: headerTitleStyleSupported
  }, titleText)) : null), headerBackImageSource !== undefined ? React.createElement(_reactNativeScreens.ScreenStackHeaderBackButtonImage, {
    source: headerBackImageSource
  }) : null, headerRightElement != null ? React.createElement(_reactNativeScreens.ScreenStackHeaderRightView, null, headerRightElement) : null, hasHeaderSearchBar ? React.createElement(_reactNativeScreens.ScreenStackHeaderSearchBarView, null, React.createElement(_reactNativeScreens.SearchBar, headerSearchBarOptions)) : null));
}

var styles = _reactNative.StyleSheet.create({
  row: {
    flexDirection: 'row',
    alignItems: 'center'
  },
  translucent: {
    position: 'absolute',
    top: 0,
    left: 0,
    right: 0,
    zIndex: 1
  },
  background: {
    overflow: 'hidden'
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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a0JBQWtCLElBQUksSUFBdEJBLEdBQ0NVLG9CQUFDTSw4Q0FBRCxRQUNHaEIsa0JBREgsQ0FEREEsR0FJRyxJQWpHTixFQWtHR00sa0JBQWtCLEdBQ2pCSSxvQkFBQ00sa0RBQUQsUUFDRU4sb0JBQUNNLDZCQUFELEVBQWVqRCxzQkFBZixDQURGLENBRGlCLEdBSWYsSUF0R04sQ0FaRixDQURGO0FBdUhEOztBQUVELElBQU04QyxNQUFNLEdBQUdsQyx3QkFBVytELE1BQVgvRCxDQUFrQjtFQUMvQjJELEdBQUcsRUFBRTtJQUNISyxhQUFhLEVBQUUsS0FEWjtJQUVIQyxVQUFVLEVBQUU7RUFGVCxDQUQwQjtFQUsvQm5DLFdBQVcsRUFBRTtJQUNYb0MsUUFBUSxFQUFFLFVBREM7SUFFWFIsR0FBRyxFQUFFLENBRk07SUFHWFMsSUFBSSxFQUFFLENBSEs7SUFJWEMsS0FBSyxFQUFFLENBSkk7SUFLWEMsTUFBTSxFQUFFO0VBTEcsQ0FMa0I7RUFZL0JsQyxVQUFVLEVBQUU7SUFDVm1DLFFBQVEsRUFBRTtFQURBO0FBWm1CLENBQWxCdEUsQ0FBZiIsIm5hbWVzIjpbIkhlYWRlckNvbmZpZyIsImhlYWRlckhlaWdodCIsImhlYWRlckJhY2tJbWFnZVNvdXJjZSIsImhlYWRlckJhY2tCdXR0b25NZW51RW5hYmxlZCIsImhlYWRlckJhY2tUaXRsZSIsImhlYWRlckJhY2tUaXRsZVN0eWxlIiwiaGVhZGVyQmFja1RpdGxlVmlzaWJsZSIsImhlYWRlckJhY2tWaXNpYmxlIiwiaGVhZGVyU2hhZG93VmlzaWJsZSIsImhlYWRlckxhcmdlU3R5bGUiLCJoZWFkZXJMYXJnZVRpdGxlIiwiaGVhZGVyTGFyZ2VUaXRsZVNoYWRvd1Zpc2libGUiLCJoZWFkZXJMYXJnZVRpdGxlU3R5bGUiLCJoZWFkZXJCYWNrZ3JvdW5kIiwiaGVhZGVyTGVmdCIsImhlYWRlclJpZ2h0IiwiaGVhZGVyU2hvd24iLCJoZWFkZXJTdHlsZSIsImhlYWRlckJsdXJFZmZlY3QiLCJoZWFkZXJUaW50Q29sb3IiLCJoZWFkZXJUaXRsZSIsImhlYWRlclRpdGxlQWxpZ24iLCJoZWFkZXJUaXRsZVN0eWxlIiwiaGVhZGVyVHJhbnNwYXJlbnQiLCJoZWFkZXJTZWFyY2hCYXJPcHRpb25zIiwicm91dGUiLCJ0aXRsZSIsImNhbkdvQmFjayIsImluc2V0cyIsImNvbG9ycyIsInRpbnRDb2xvciIsIlBsYXRmb3JtIiwiT1MiLCJwcmltYXJ5IiwidGV4dCIsImhlYWRlckJhY2tUaXRsZVN0eWxlRmxhdHRlbmVkIiwiU3R5bGVTaGVldCIsImZsYXR0ZW4iLCJoZWFkZXJMYXJnZVRpdGxlU3R5bGVGbGF0dGVuZWQiLCJoZWFkZXJUaXRsZVN0eWxlRmxhdHRlbmVkIiwiaGVhZGVyU3R5bGVGbGF0dGVuZWQiLCJoZWFkZXJMYXJnZVN0eWxlRmxhdHRlbmVkIiwiZm9udEZhbWlseSIsImJhY2tUaXRsZUZvbnRGYW1pbHkiLCJsYXJnZVRpdGxlRm9udEZhbWlseSIsInRpdGxlRm9udEZhbWlseSIsInRpdGxlVGV4dCIsIm5hbWUiLCJ0aXRsZUNvbG9yIiwiY29sb3IiLCJ0aXRsZUZvbnRTaXplIiwiZm9udFNpemUiLCJ0aXRsZUZvbnRXZWlnaHQiLCJmb250V2VpZ2h0IiwiaGVhZGVyVGl0bGVTdHlsZVN1cHBvcnRlZCIsImhlYWRlckxlZnRFbGVtZW50IiwibGFiZWwiLCJoZWFkZXJSaWdodEVsZW1lbnQiLCJoZWFkZXJUaXRsZUVsZW1lbnQiLCJjaGlsZHJlbiIsInN1cHBvcnRzSGVhZGVyU2VhcmNoQmFyIiwiaXNTZWFyY2hCYXJBdmFpbGFibGVGb3JDdXJyZW50UGxhdGZvcm0iLCJTZWFyY2hCYXIiLCJoYXNIZWFkZXJTZWFyY2hCYXIiLCJFcnJvciIsImJhY2tCdXR0b25JbkN1c3RvbVZpZXciLCJ0cmFuc2x1Y2VudCIsIlJlYWN0IiwiX3JlYWN0TmF0aXZlIiwic3R5bGUiLCJzdHlsZXMiLCJiYWNrZ3JvdW5kIiwiaGVpZ2h0IiwiX3JlYWN0TmF0aXZlU2NyZWVucyIsImJhY2tncm91bmRDb2xvciIsImNhcmQiLCJiYWNrVGl0bGUiLCJiYWNrVGl0bGVGb250U2l6ZSIsImJsdXJFZmZlY3QiLCJkaXJlY3Rpb24iLCJJMThuTWFuYWdlciIsImdldENvbnN0YW50cyIsImlzUlRMIiwiZGlzYWJsZUJhY2tCdXR0b25NZW51IiwiaGlkZGVuIiwiaGlkZUJhY2tCdXR0b24iLCJoaWRlU2hhZG93IiwibGFyZ2VUaXRsZSIsImxhcmdlVGl0bGVCYWNrZ3JvdW5kQ29sb3IiLCJsYXJnZVRpdGxlQ29sb3IiLCJsYXJnZVRpdGxlRm9udFNpemUiLCJsYXJnZVRpdGxlRm9udFdlaWdodCIsImxhcmdlVGl0bGVIaWRlU2hhZG93IiwidG9wSW5zZXRFbmFibGVkIiwidG9wIiwicm93IiwiX2VsZW1lbnRzIiwidW5kZWZpbmVkIiwic291cmNlIiwiY3JlYXRlIiwiZmxleERpcmVjdGlvbiIsImFsaWduSXRlbXMiLCJwb3NpdGlvbiIsImxlZnQiLCJyaWdodCIsInpJbmRleCIsIm92ZXJmbG93Il0sInNvdXJjZXMiOlsiSGVhZGVyQ29uZmlnLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRIZWFkZXJUaXRsZSwgSGVhZGVyVGl0bGUgfSBmcm9tICdAcmVhY3QtbmF2aWdhdGlvbi9lbGVtZW50cyc7XG5pbXBvcnQgeyBSb3V0ZSwgdXNlVGhlbWUgfSBmcm9tICdAcmVhY3QtbmF2aWdhdGlvbi9uYXRpdmUnO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtcbiAgSTE4bk1hbmFnZXIsXG4gIFBsYXRmb3JtLFxuICBTdHlsZVNoZWV0LFxuICBUZXh0U3R5bGUsXG4gIFZpZXcsXG59IGZyb20gJ3JlYWN0LW5hdGl2ZSc7XG5pbXBvcnQgeyB1c2VTYWZlQXJlYUluc2V0cyB9IGZyb20gJ3JlYWN0LW5hdGl2ZS1zYWZlLWFyZWEtY29udGV4dCc7XG5pbXBvcnQge1xuICBpc1NlYXJjaEJhckF2YWlsYWJsZUZvckN1cnJlbnRQbGF0Zm9ybSxcbiAgU2NyZWVuU3RhY2tIZWFkZXJCYWNrQnV0dG9uSW1hZ2UsXG4gIFNjcmVlblN0YWNrSGVhZGVyQ2VudGVyVmlldyxcbiAgU2NyZWVuU3RhY2tIZWFkZXJDb25maWcsXG4gIFNjcmVlblN0YWNrSGVhZGVyTGVmdFZpZXcsXG4gIFNjcmVlblN0YWNrSGVhZGVyUmlnaHRWaWV3LFxuICBTY3JlZW5TdGFja0hlYWRlclNlYXJjaEJhclZpZXcsXG4gIFNlYXJjaEJhcixcbn0gZnJvbSAncmVhY3QtbmF0aXZlLXNjcmVlbnMnO1xuXG5pbXBvcnQgdHlwZSB7IE5hdGl2ZVN0YWNrTmF2aWdhdGlvbk9wdGlvbnMgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBwcm9jZXNzRm9udHMgfSBmcm9tICcuL0ZvbnRQcm9jZXNzb3InO1xuXG50eXBlIFByb3BzID0gTmF0aXZlU3RhY2tOYXZpZ2F0aW9uT3B0aW9ucyAmIHtcbiAgaGVhZGVySGVpZ2h0OiBudW1iZXI7XG4gIHJvdXRlOiBSb3V0ZTxzdHJpbmc+O1xuICBjYW5Hb0JhY2s6IGJvb2xlYW47XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBIZWFkZXJDb25maWcoe1xuICBoZWFkZXJIZWlnaHQsXG4gIGhlYWRlckJhY2tJbWFnZVNvdXJjZSxcbiAgaGVhZGVyQmFja0J1dHRvbk1lbnVFbmFibGVkLFxuICBoZWFkZXJCYWNrVGl0bGUsXG4gIGhlYWRlckJhY2tUaXRsZVN0eWxlLFxuICBoZWFkZXJCYWNrVGl0bGVWaXNpYmxlID0gdHJ1ZSxcbiAgaGVhZGVyQmFja1Zpc2libGUsXG4gIGhlYWRlclNoYWRvd1Zpc2libGUsXG4gIGhlYWRlckxhcmdlU3R5bGUsXG4gIGhlYWRlckxhcmdlVGl0bGUsXG4gIGhlYWRlckxhcmdlVGl0bGVTaGFkb3dWaXNpYmxlLFxuICBoZWFkZXJMYXJnZVRpdGxlU3R5bGUsXG4gIGhlYWRlckJhY2tncm91bmQsXG4gIGhlYWRlckxlZnQsXG4gIGhlYWRlclJpZ2h0LFxuICBoZWFkZXJTaG93bixcbiAgaGVhZGVyU3R5bGUsXG4gIGhlYWRlckJsdXJFZmZlY3QsXG4gIGhlYWRlclRpbnRDb2xvcixcbiAgaGVhZGVyVGl0bGUsXG4gIGhlYWRlclRpdGxlQWxpZ24sXG4gIGhlYWRlclRpdGxlU3R5bGUsXG4gIGhlYWRlclRyYW5zcGFyZW50LFxuICBoZWFkZXJTZWFyY2hCYXJPcHRpb25zLFxuICByb3V0ZSxcbiAgdGl0bGUsXG4gIGNhbkdvQmFjayxcbn06IFByb3BzKTogSlNYLkVsZW1lbnQge1xuICBjb25zdCBpbnNldHMgPSB1c2VTYWZlQXJlYUluc2V0cygpO1xuXG4gIGNvbnN0IHsgY29sb3JzIH0gPSB1c2VUaGVtZSgpO1xuICBjb25zdCB0aW50Q29sb3IgPVxuICAgIGhlYWRlclRpbnRDb2xvciA/PyAoUGxhdGZvcm0uT1MgPT09ICdpb3MnID8gY29sb3JzLnByaW1hcnkgOiBjb2xvcnMudGV4dCk7XG5cbiAgY29uc3QgaGVhZGVyQmFja1RpdGxlU3R5bGVGbGF0dGVuZWQgPVxuICAgIFN0eWxlU2hlZXQuZmxhdHRlbihoZWFkZXJCYWNrVGl0bGVTdHlsZSkgfHwge307XG4gIGNvbnN0IGhlYWRlckxhcmdlVGl0bGVTdHlsZUZsYXR0ZW5lZCA9XG4gICAgU3R5bGVTaGVldC5mbGF0dGVuKGhlYWRlckxhcmdlVGl0bGVTdHlsZSkgfHwge307XG4gIGNvbnN0IGhlYWRlclRpdGxlU3R5bGVGbGF0dGVuZWQgPSBTdHlsZVNoZWV0LmZsYXR0ZW4oaGVhZGVyVGl0bGVTdHlsZSkgfHwge307XG4gIGNvbnN0IGhlYWRlclN0eWxlRmxhdHRlbmVkID0gU3R5bGVTaGVldC5mbGF0dGVuKGhlYWRlclN0eWxlKSB8fCB7fTtcbiAgY29uc3QgaGVhZGVyTGFyZ2VTdHlsZUZsYXR0ZW5lZCA9IFN0eWxlU2hlZXQuZmxhdHRlbihoZWFkZXJMYXJnZVN0eWxlKSB8fCB7fTtcblxuICBjb25zdCBbYmFja1RpdGxlRm9udEZhbWlseSwgbGFyZ2VUaXRsZUZvbnRGYW1pbHksIHRpdGxlRm9udEZhbWlseV0gPVxuICAgIHByb2Nlc3NGb250cyhbXG4gICAgICBoZWFkZXJCYWNrVGl0bGVTdHlsZUZsYXR0ZW5lZC5mb250RmFtaWx5LFxuICAgICAgaGVhZGVyTGFyZ2VUaXRsZVN0eWxlRmxhdHRlbmVkLmZvbnRGYW1pbHksXG4gICAgICBoZWFkZXJUaXRsZVN0eWxlRmxhdHRlbmVkLmZvbnRGYW1pbHksXG4gICAgXSk7XG5cbiAgY29uc3QgdGl0bGVUZXh0ID0gZ2V0SGVhZGVyVGl0bGUoeyB0aXRsZSwgaGVhZGVyVGl0bGUgfSwgcm91dGUubmFtZSk7XG4gIGNvbnN0IHRpdGxlQ29sb3IgPVxuICAgIGhlYWRlclRpdGxlU3R5bGVGbGF0dGVuZWQuY29sb3IgPz8gaGVhZGVyVGludENvbG9yID8/IGNvbG9ycy50ZXh0O1xuICBjb25zdCB0aXRsZUZvbnRTaXplID0gaGVhZGVyVGl0bGVTdHlsZUZsYXR0ZW5lZC5mb250U2l6ZTtcbiAgY29uc3QgdGl0bGVGb250V2VpZ2h0ID0gaGVhZGVyVGl0bGVTdHlsZUZsYXR0ZW5lZC5mb250V2VpZ2h0O1xuXG4gIGNvbnN0IGhlYWRlclRpdGxlU3R5bGVTdXBwb3J0ZWQ6IFRleHRTdHlsZSA9IHsgY29sb3I6IHRpdGxlQ29sb3IgfTtcblxuICBpZiAoaGVhZGVyVGl0bGVTdHlsZUZsYXR0ZW5lZC5mb250RmFtaWx5ICE9IG51bGwpIHtcbiAgICBoZWFkZXJUaXRsZVN0eWxlU3VwcG9ydGVkLmZvbnRGYW1pbHkgPSBoZWFkZXJUaXRsZVN0eWxlRmxhdHRlbmVkLmZvbnRGYW1pbHk7XG4gIH1cblxuICBpZiAodGl0bGVGb250U2l6ZSAhPSBudWxsKSB7XG4gICAgaGVhZGVyVGl0bGVTdHlsZVN1cHBvcnRlZC5mb250U2l6ZSA9IHRpdGxlRm9udFNpemU7XG4gIH1cblxuICBpZiAodGl0bGVGb250V2VpZ2h0ICE9IG51bGwpIHtcbiAgICBoZWFkZXJUaXRsZVN0eWxlU3VwcG9ydGVkLmZvbnRXZWlnaHQgPSB0aXRsZUZvbnRXZWlnaHQ7XG4gIH1cblxuICBjb25zdCBoZWFkZXJMZWZ0RWxlbWVudCA9IGhlYWRlckxlZnQ/Lih7XG4gICAgdGludENvbG9yLFxuICAgIGNhbkdvQmFjayxcbiAgICBsYWJlbDogaGVhZGVyQmFja1RpdGxlLFxuICB9KTtcbiAgY29uc3QgaGVhZGVyUmlnaHRFbGVtZW50ID0gaGVhZGVyUmlnaHQ/Lih7XG4gICAgdGludENvbG9yLFxuICAgIGNhbkdvQmFjayxcbiAgfSk7XG4gIGNvbnN0IGhlYWRlclRpdGxlRWxlbWVudCA9XG4gICAgdHlwZW9mIGhlYWRlclRpdGxlID09PSAnZnVuY3Rpb24nXG4gICAgICA/IGhlYWRlclRpdGxlKHtcbiAgICAgICAgICB0aW50Q29sb3IsXG4gICAgICAgICAgY2hpbGRyZW46IHRpdGxlVGV4dCxcbiAgICAgICAgfSlcbiAgICAgIDogbnVsbDtcblxuICBjb25zdCBzdXBwb3J0c0hlYWRlclNlYXJjaEJhciA9XG4gICAgdHlwZW9mIGlzU2VhcmNoQmFyQXZhaWxhYmxlRm9yQ3VycmVudFBsYXRmb3JtID09PSAnYm9vbGVhbidcbiAgICAgID8gaXNTZWFyY2hCYXJBdmFpbGFibGVGb3JDdXJyZW50UGxhdGZvcm1cbiAgICAgIDogLy8gRmFsbGJhY2sgZm9yIG9sZGVyIHZlcnNpb25zIG9mIHJlYWN0LW5hdGl2ZS1zY3JlZW5zXG4gICAgICAgIFBsYXRmb3JtLk9TID09PSAnaW9zJyAmJiBTZWFyY2hCYXIgIT0gbnVsbDtcblxuICBjb25zdCBoYXNIZWFkZXJTZWFyY2hCYXIgPVxuICAgIHN1cHBvcnRzSGVhZGVyU2VhcmNoQmFyICYmIGhlYWRlclNlYXJjaEJhck9wdGlvbnMgIT0gbnVsbDtcblxuICBpZiAoaGVhZGVyU2VhcmNoQmFyT3B0aW9ucyAhPSBudWxsICYmICFzdXBwb3J0c0hlYWRlclNlYXJjaEJhcikge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBUaGUgY3VycmVudCB2ZXJzaW9uIG9mICdyZWFjdC1uYXRpdmUtc2NyZWVucycgZG9lc24ndCBzdXBwb3J0IFNlYXJjaEJhciBpbiB0aGUgaGVhZGVyLiBQbGVhc2UgdXBkYXRlIHRvIHRoZSBsYXRlc3QgdmVyc2lvbiB0byB1c2UgdGhpcyBvcHRpb24uYFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogV2UgbmVlZCB0byBzZXQgdGhpcyBpbiBpZjpcbiAgICogLSBCYWNrIGJ1dHRvbiBzaG91bGQgc3RheSB2aXNpYmxlIHdoZW4gYGhlYWRlckxlZnRgIGlzIHNwZWNpZmllZFxuICAgKiAtIElmIGBoZWFkZXJUaXRsZWAgZm9yIEFuZHJvaWQgaXMgc3BlY2lmaWVkLCBzbyB3ZSBvbmx5IG5lZWQgdG8gcmVtb3ZlIHRoZSB0aXRsZSBhbmQga2VlcCB0aGUgYmFjayBidXR0b25cbiAgICovXG4gIGNvbnN0IGJhY2tCdXR0b25JbkN1c3RvbVZpZXcgPSBoZWFkZXJCYWNrVmlzaWJsZVxuICAgID8gaGVhZGVyTGVmdEVsZW1lbnQgIT0gbnVsbFxuICAgIDogUGxhdGZvcm0uT1MgPT09ICdhbmRyb2lkJyAmJiBoZWFkZXJUaXRsZUVsZW1lbnQgIT0gbnVsbDtcblxuICBjb25zdCB0cmFuc2x1Y2VudCA9XG4gICAgaGVhZGVyQmFja2dyb3VuZCAhPSBudWxsIHx8XG4gICAgaGVhZGVyVHJhbnNwYXJlbnQgfHxcbiAgICAvLyBXaGVuIHVzaW5nIGEgU2VhcmNoQmFyIG9yIGxhcmdlIHRpdGxlLCB0aGUgaGVhZGVyIG5lZWRzIHRvIGJlIHRyYW5zbHVjZW50IGZvciBpdCB0byB3b3JrIG9uIGlPU1xuICAgICgoaGFzSGVhZGVyU2VhcmNoQmFyIHx8IGhlYWRlckxhcmdlVGl0bGUpICYmXG4gICAgICBQbGF0Zm9ybS5PUyA9PT0gJ2lvcycgJiZcbiAgICAgIGhlYWRlclRyYW5zcGFyZW50ICE9PSBmYWxzZSk7XG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAge2hlYWRlckJhY2tncm91bmQgIT0gbnVsbCA/IChcbiAgICAgICAgPFZpZXdcbiAgICAgICAgICBzdHlsZT17W1xuICAgICAgICAgICAgc3R5bGVzLmJhY2tncm91bmQsXG4gICAgICAgICAgICBoZWFkZXJUcmFuc3BhcmVudCA/IHN0eWxlcy50cmFuc2x1Y2VudCA6IG51bGwsXG4gICAgICAgICAgICB7IGhlaWdodDogaGVhZGVySGVpZ2h0IH0sXG4gICAgICAgICAgXX1cbiAgICAgICAgPlxuICAgICAgICAgIHtoZWFkZXJCYWNrZ3JvdW5kKCl9XG4gICAgICAgIDwvVmlldz5cbiAgICAgICkgOiBudWxsfVxuICAgICAgPFNjcmVlblN0YWNrSGVhZGVyQ29uZmlnXG4gICAgICAgIGJhY2tCdXR0b25JbkN1c3RvbVZpZXc9e2JhY2tCdXR0b25JbkN1c3RvbVZpZXd9XG4gICAgICAgIGJhY2tncm91bmRDb2xvcj17XG4gICAgICAgICAgaGVhZGVyU3R5bGVGbGF0dGVuZWQuYmFja2dyb3VuZENvbG9yID8/XG4gICAgICAgICAgKGhlYWRlckJhY2tncm91bmQgIT0gbnVsbCB8fCBoZWFkZXJUcmFuc3BhcmVudFxuICAgICAgICAgICAgPyAndHJhbnNwYXJlbnQnXG4gICAgICAgICAgICA6IGNvbG9ycy5jYXJkKVxuICAgICAgICB9XG4gICAgICAgIGJhY2tUaXRsZT17aGVhZGVyQmFja1RpdGxlVmlzaWJsZSA/IGhlYWRlckJhY2tUaXRsZSA6ICcgJ31cbiAgICAgICAgYmFja1RpdGxlRm9udEZhbWlseT17YmFja1RpdGxlRm9udEZhbWlseX1cbiAgICAgICAgYmFja1RpdGxlRm9udFNpemU9e2hlYWRlckJhY2tUaXRsZVN0eWxlRmxhdHRlbmVkLmZvbnRTaXplfVxuICAgICAgICBibHVyRWZmZWN0PXtoZWFkZXJCbHVyRWZmZWN0fVxuICAgICAgICBjb2xvcj17dGludENvbG9yfVxuICAgICAgICBkaXJlY3Rpb249e0kxOG5NYW5hZ2VyLmdldENvbnN0YW50cygpLmlzUlRMID8gJ3J0bCcgOiAnbHRyJ31cbiAgICAgICAgZGlzYWJsZUJhY2tCdXR0b25NZW51PXtoZWFkZXJCYWNrQnV0dG9uTWVudUVuYWJsZWQgPT09IGZhbHNlfVxuICAgICAgICBoaWRkZW49e2hlYWRlclNob3duID09PSBmYWxzZX1cbiAgICAgICAgaGlkZUJhY2tCdXR0b249e2hlYWRlckJhY2tWaXNpYmxlID09PSBmYWxzZX1cbiAgICAgICAgaGlkZVNoYWRvdz17XG4gICAgICAgICAgaGVhZGVyU2hhZG93VmlzaWJsZSA9PT0gZmFsc2UgfHxcbiAgICAgICAgICBoZWFkZXJCYWNrZ3JvdW5kICE9IG51bGwgfHxcbiAgICAgICAgICBoZWFkZXJUcmFuc3BhcmVudFxuICAgICAgICB9XG4gICAgICAgIGxhcmdlVGl0bGU9e2hlYWRlckxhcmdlVGl0bGV9XG4gICAgICAgIGxhcmdlVGl0bGVCYWNrZ3JvdW5kQ29sb3I9e2hlYWRlckxhcmdlU3R5bGVGbGF0dGVuZWQuYmFja2dyb3VuZENvbG9yfVxuICAgICAgICBsYXJnZVRpdGxlQ29sb3I9e2hlYWRlckxhcmdlVGl0bGVTdHlsZUZsYXR0ZW5lZC5jb2xvcn1cbiAgICAgICAgbGFyZ2VUaXRsZUZvbnRGYW1pbHk9e2xhcmdlVGl0bGVGb250RmFtaWx5fVxuICAgICAgICBsYXJnZVRpdGxlRm9udFNpemU9e2hlYWRlckxhcmdlVGl0bGVTdHlsZUZsYXR0ZW5lZC5mb250U2l6ZX1cbiAgICAgICAgbGFyZ2VUaXRsZUZvbnRXZWlnaHQ9e2hlYWRlckxhcmdlVGl0bGVTdHlsZUZsYXR0ZW5lZC5mb250V2VpZ2h0fVxuICAgICAgICBsYXJnZVRpdGxlSGlkZVNoYWRvdz17aGVhZGVyTGFyZ2VUaXRsZVNoYWRvd1Zpc2libGUgPT09IGZhbHNlfVxuICAgICAgICB0aXRsZT17dGl0bGVUZXh0fVxuICAgICAgICB0aXRsZUNvbG9yPXt0aXRsZUNvbG9yfVxuICAgICAgICB0aXRsZUZvbnRGYW1pbHk9e3RpdGxlRm9udEZhbWlseX1cbiAgICAgICAgdGl0bGVGb250U2l6ZT17dGl0bGVGb250U2l6ZX1cbiAgICAgICAgdGl0bGVGb250V2VpZ2h0PXt0aXRsZUZvbnRXZWlnaHR9XG4gICAgICAgIHRvcEluc2V0RW5hYmxlZD17aW5zZXRzLnRvcCAhPT0gMH1cbiAgICAgICAgdHJhbnNsdWNlbnQ9e1xuICAgICAgICAgIC8vIFRoaXMgZGVmYXVsdHMgdG8gYHRydWVgLCBzbyB3ZSBjYW4ndCBwYXNzIGB1bmRlZmluZWRgXG4gICAgICAgICAgdHJhbnNsdWNlbnQgPT09IHRydWVcbiAgICAgICAgfVxuICAgICAgPlxuICAgICAgICB7UGxhdGZvcm0uT1MgPT09ICdpb3MnID8gKFxuICAgICAgICAgIDw+XG4gICAgICAgICAgICB7aGVhZGVyTGVmdEVsZW1lbnQgIT0gbnVsbCA/IChcbiAgICAgICAgICAgICAgPFNjcmVlblN0YWNrSGVhZGVyTGVmdFZpZXc+XG4gICAgICAgICAgICAgICAge2hlYWRlckxlZnRFbGVtZW50fVxuICAgICAgICAgICAgICA8L1NjcmVlblN0YWNrSGVhZGVyTGVmdFZpZXc+XG4gICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgIHtoZWFkZXJUaXRsZUVsZW1lbnQgIT0gbnVsbCA/IChcbiAgICAgICAgICAgICAgPFNjcmVlblN0YWNrSGVhZGVyQ2VudGVyVmlldz5cbiAgICAgICAgICAgICAgICB7aGVhZGVyVGl0bGVFbGVtZW50fVxuICAgICAgICAgICAgICA8L1NjcmVlblN0YWNrSGVhZGVyQ2VudGVyVmlldz5cbiAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgIDwvPlxuICAgICAgICApIDogKFxuICAgICAgICAgIDw+XG4gICAgICAgICAgICB7aGVhZGVyTGVmdEVsZW1lbnQgIT0gbnVsbCB8fCB0eXBlb2YgaGVhZGVyVGl0bGUgPT09ICdmdW5jdGlvbicgPyAoXG4gICAgICAgICAgICAgIDxTY3JlZW5TdGFja0hlYWRlckxlZnRWaWV3PlxuICAgICAgICAgICAgICAgIDxWaWV3IHN0eWxlPXtzdHlsZXMucm93fT5cbiAgICAgICAgICAgICAgICAgIHtoZWFkZXJMZWZ0RWxlbWVudH1cbiAgICAgICAgICAgICAgICAgIHtoZWFkZXJUaXRsZUFsaWduICE9PSAnY2VudGVyJyA/IChcbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIGhlYWRlclRpdGxlID09PSAnZnVuY3Rpb24nID8gKFxuICAgICAgICAgICAgICAgICAgICAgIGhlYWRlclRpdGxlRWxlbWVudFxuICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgIDxIZWFkZXJUaXRsZVxuICAgICAgICAgICAgICAgICAgICAgICAgdGludENvbG9yPXt0aW50Q29sb3J9XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17aGVhZGVyVGl0bGVTdHlsZVN1cHBvcnRlZH1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7dGl0bGVUZXh0fVxuICAgICAgICAgICAgICAgICAgICAgIDwvSGVhZGVyVGl0bGU+XG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgIDwvVmlldz5cbiAgICAgICAgICAgICAgPC9TY3JlZW5TdGFja0hlYWRlckxlZnRWaWV3PlxuICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICB7aGVhZGVyVGl0bGVBbGlnbiA9PT0gJ2NlbnRlcicgPyAoXG4gICAgICAgICAgICAgIDxTY3JlZW5TdGFja0hlYWRlckNlbnRlclZpZXc+XG4gICAgICAgICAgICAgICAge3R5cGVvZiBoZWFkZXJUaXRsZSA9PT0gJ2Z1bmN0aW9uJyA/IChcbiAgICAgICAgICAgICAgICAgIGhlYWRlclRpdGxlRWxlbWVudFxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICA8SGVhZGVyVGl0bGVcbiAgICAgICAgICAgICAgICAgICAgdGludENvbG9yPXt0aW50Q29sb3J9XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXtoZWFkZXJUaXRsZVN0eWxlU3VwcG9ydGVkfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7dGl0bGVUZXh0fVxuICAgICAgICAgICAgICAgICAgPC9IZWFkZXJUaXRsZT5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L1NjcmVlblN0YWNrSGVhZGVyQ2VudGVyVmlldz5cbiAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgIDwvPlxuICAgICAgICApfVxuICAgICAgICB7aGVhZGVyQmFja0ltYWdlU291cmNlICE9PSB1bmRlZmluZWQgPyAoXG4gICAgICAgICAgPFNjcmVlblN0YWNrSGVhZGVyQmFja0J1dHRvbkltYWdlIHNvdXJjZT17aGVhZGVyQmFja0ltYWdlU291cmNlfSAvPlxuICAgICAgICApIDogbnVsbH1cbiAgICAgICAge2hlYWRlclJpZ2h0RWxlbWVudCAhPSBudWxsID8gKFxuICAgICAgICAgIDxTY3JlZW5TdGFja0hlYWRlclJpZ2h0Vmlldz5cbiAgICAgICAgICAgIHtoZWFkZXJSaWdodEVsZW1lbnR9XG4gICAgICAgICAgPC9TY3JlZW5TdGFja0hlYWRlclJpZ2h0Vmlldz5cbiAgICAgICAgKSA6IG51bGx9XG4gICAgICAgIHtoYXNIZWFkZXJTZWFyY2hCYXIgPyAoXG4gICAgICAgICAgPFNjcmVlblN0YWNrSGVhZGVyU2VhcmNoQmFyVmlldz5cbiAgICAgICAgICAgIDxTZWFyY2hCYXIgey4uLmhlYWRlclNlYXJjaEJhck9wdGlvbnN9IC8+XG4gICAgICAgICAgPC9TY3JlZW5TdGFja0hlYWRlclNlYXJjaEJhclZpZXc+XG4gICAgICAgICkgOiBudWxsfVxuICAgICAgPC9TY3JlZW5TdGFja0hlYWRlckNvbmZpZz5cbiAgICA8Lz5cbiAgKTtcbn1cblxuY29uc3Qgc3R5bGVzID0gU3R5bGVTaGVldC5jcmVhdGUoe1xuICByb3c6IHtcbiAgICBmbGV4RGlyZWN0aW9uOiAncm93JyxcbiAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgfSxcbiAgdHJhbnNsdWNlbnQ6IHtcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICB0b3A6IDAsXG4gICAgbGVmdDogMCxcbiAgICByaWdodDogMCxcbiAgICB6SW5kZXg6IDEsXG4gIH0sXG4gIGJhY2tncm91bmQ6IHtcbiAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gIH0sXG59KTtcbiJdfQ==