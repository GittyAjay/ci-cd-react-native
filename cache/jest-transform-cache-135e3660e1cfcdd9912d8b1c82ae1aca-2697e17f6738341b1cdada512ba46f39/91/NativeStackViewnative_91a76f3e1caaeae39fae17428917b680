03406a45ba91a80870504a0464765799
"use strict";

var _interopRequireDefault2 = require("@babel/runtime/helpers/interopRequireDefault");

var _slicedToArray2 = _interopRequireDefault2(require("@babel/runtime/helpers/slicedToArray"));

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = NativeStackView;

var _elements = require("@react-navigation/elements");

var _native = require("@react-navigation/native");

var React = _interopRequireWildcard(require("react"));

var _reactNative = require("react-native");

var _reactNativeSafeAreaContext = require("react-native-safe-area-context");

var _reactNativeScreens = require("react-native-screens");

var _warnOnce = _interopRequireDefault(require("warn-once"));

var _useDismissedRouteError = _interopRequireDefault(require("../utils/useDismissedRouteError"));

var _useInvalidPreventRemoveError = _interopRequireDefault(require("../utils/useInvalidPreventRemoveError"));

var _DebugContainer = _interopRequireDefault(require("./DebugContainer"));

var _HeaderConfig = _interopRequireDefault(require("./HeaderConfig"));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

function _getRequireWildcardCache(nodeInterop) {
  if (typeof WeakMap !== "function") return null;
  var cacheBabelInterop = new WeakMap();
  var cacheNodeInterop = new WeakMap();
  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {
    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
  })(nodeInterop);
}

function _interopRequireWildcard(obj, nodeInterop) {
  if (!nodeInterop && obj && obj.__esModule) {
    return obj;
  }

  if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
    return {
      default: obj
    };
  }

  var cache = _getRequireWildcardCache(nodeInterop);

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

  for (var key in obj) {
    if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }

  newObj.default = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

function _extends() {
  _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends.apply(this, arguments);
}

var isAndroid = _reactNative.Platform.OS === 'android';

var MaybeNestedStack = function MaybeNestedStack(_ref) {
  var options = _ref.options,
      route = _ref.route,
      presentation = _ref.presentation,
      headerHeight = _ref.headerHeight,
      children = _ref.children;

  var _ref4 = (0, _native.useTheme)(),
      colors = _ref4.colors;

  var header = options.header,
      _options$headerShown = options.headerShown,
      headerShown = _options$headerShown === void 0 ? true : _options$headerShown,
      contentStyle = options.contentStyle;
  var isHeaderInModal = isAndroid ? false : presentation !== 'card' && headerShown === true && header === undefined;
  var headerShownPreviousRef = React.useRef(headerShown);
  React.useEffect(function () {
    (0, _warnOnce.default)(!isAndroid && presentation !== 'card' && headerShownPreviousRef.current !== headerShown, "Dynamically changing 'headerShown' in modals will result in remounting the screen and losing all local state. See options for the screen '" + route.name + "'.");
    headerShownPreviousRef.current = headerShown;
  }, [headerShown, presentation, route.name]);
  var content = React.createElement(_DebugContainer.default, {
    style: [styles.container, presentation !== 'transparentModal' && presentation !== 'containedTransparentModal' && {
      backgroundColor: colors.background
    }, contentStyle],
    stackPresentation: presentation === 'card' ? 'push' : presentation
  }, children);

  if (isHeaderInModal) {
    return React.createElement(_reactNativeScreens.ScreenStack, {
      style: styles.container
    }, React.createElement(_reactNativeScreens.Screen, {
      enabled: true,
      style: _reactNative.StyleSheet.absoluteFill
    }, React.createElement(_HeaderConfig.default, _extends({}, options, {
      route: route,
      headerHeight: headerHeight,
      canGoBack: true
    })), content));
  }

  return content;
};

var SceneView = function SceneView(_ref2) {
  var _preventedRoutes$rout;

  var descriptor = _ref2.descriptor,
      previousDescriptor = _ref2.previousDescriptor,
      nextDescriptor = _ref2.nextDescriptor,
      index = _ref2.index,
      onWillDisappear = _ref2.onWillDisappear,
      onAppear = _ref2.onAppear,
      onDisappear = _ref2.onDisappear,
      onDismissed = _ref2.onDismissed,
      onHeaderBackButtonClicked = _ref2.onHeaderBackButtonClicked,
      onNativeDismissCancelled = _ref2.onNativeDismissCancelled;
  var route = descriptor.route,
      navigation = descriptor.navigation,
      options = descriptor.options,
      render = descriptor.render;
  var animationDuration = options.animationDuration,
      _options$animationTyp = options.animationTypeForReplace,
      animationTypeForReplace = _options$animationTyp === void 0 ? 'push' : _options$animationTyp,
      gestureEnabled = options.gestureEnabled,
      header = options.header,
      headerBackButtonMenuEnabled = options.headerBackButtonMenuEnabled,
      headerShown = options.headerShown,
      autoHideHomeIndicator = options.autoHideHomeIndicator,
      navigationBarColor = options.navigationBarColor,
      navigationBarHidden = options.navigationBarHidden,
      orientation = options.orientation,
      statusBarAnimation = options.statusBarAnimation,
      statusBarHidden = options.statusBarHidden,
      statusBarStyle = options.statusBarStyle,
      statusBarTranslucent = options.statusBarTranslucent,
      statusBarColor = options.statusBarColor;
  var animation = options.animation,
      customAnimationOnGesture = options.customAnimationOnGesture,
      fullScreenGestureEnabled = options.fullScreenGestureEnabled,
      _options$presentation = options.presentation,
      presentation = _options$presentation === void 0 ? 'card' : _options$presentation,
      _options$gestureDirec = options.gestureDirection,
      gestureDirection = _options$gestureDirec === void 0 ? presentation === 'card' ? 'horizontal' : 'vertical' : _options$gestureDirec;

  if (gestureDirection === 'vertical' && _reactNative.Platform.OS === 'ios') {
    if (fullScreenGestureEnabled === undefined) {
      fullScreenGestureEnabled = true;
    }

    if (customAnimationOnGesture === undefined) {
      customAnimationOnGesture = true;
    }

    if (animation === undefined) {
      animation = 'slide_from_bottom';
    }
  }

  var nextGestureDirection = nextDescriptor === null || nextDescriptor === void 0 ? void 0 : nextDescriptor.options.gestureDirection;
  var gestureDirectionOverride = nextGestureDirection != null ? nextGestureDirection : gestureDirection;

  if (index === 0) {
    presentation = 'card';
  }

  var isHeaderInPush = isAndroid ? headerShown : presentation === 'card' && headerShown !== false;
  var insets = (0, _reactNativeSafeAreaContext.useSafeAreaInsets)();
  var frame = (0, _reactNativeSafeAreaContext.useSafeAreaFrame)();
  var isModal = presentation === 'modal' || presentation === 'formSheet';
  var isIPhone = _reactNative.Platform.OS === 'ios' && !(_reactNative.Platform.isPad || _reactNative.Platform.isTVOS);
  var isLandscape = frame.width > frame.height;
  var topInset = isModal || isIPhone && isLandscape ? 0 : insets.top;
  var isParentHeaderShown = React.useContext(_elements.HeaderShownContext);
  var parentHeaderHeight = React.useContext(_elements.HeaderHeightContext);
  var parentHeaderBack = React.useContext(_elements.HeaderBackContext);

  var _ref5 = (0, _native.usePreventRemoveContext)(),
      preventedRoutes = _ref5.preventedRoutes;

  var defaultHeaderHeight = (0, _elements.getDefaultHeaderHeight)(frame, isModal, topInset);

  var _React$useState = React.useState(defaultHeaderHeight),
      _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),
      customHeaderHeight = _React$useState2[0],
      setCustomHeaderHeight = _React$useState2[1];

  var headerHeight = header ? customHeaderHeight : defaultHeaderHeight;
  var headerBack = previousDescriptor ? {
    title: (0, _elements.getHeaderTitle)(previousDescriptor.options, previousDescriptor.route.name)
  } : parentHeaderBack;
  var isRemovePrevented = (_preventedRoutes$rout = preventedRoutes[route.key]) === null || _preventedRoutes$rout === void 0 ? void 0 : _preventedRoutes$rout.preventRemove;
  return React.createElement(_reactNativeScreens.Screen, {
    key: route.key,
    enabled: true,
    style: _reactNative.StyleSheet.absoluteFill,
    customAnimationOnSwipe: customAnimationOnGesture,
    fullScreenSwipeEnabled: fullScreenGestureEnabled,
    gestureEnabled: isAndroid ? false : gestureEnabled,
    homeIndicatorHidden: autoHideHomeIndicator,
    navigationBarColor: navigationBarColor,
    navigationBarHidden: navigationBarHidden,
    replaceAnimation: animationTypeForReplace,
    stackPresentation: presentation === 'card' ? 'push' : presentation,
    stackAnimation: animation,
    screenOrientation: orientation,
    statusBarAnimation: statusBarAnimation,
    statusBarHidden: statusBarHidden,
    statusBarStyle: statusBarStyle,
    statusBarColor: statusBarColor,
    statusBarTranslucent: statusBarTranslucent,
    swipeDirection: gestureDirectionOverride,
    transitionDuration: animationDuration,
    onWillDisappear: onWillDisappear,
    onAppear: onAppear,
    onDisappear: onDisappear,
    onDismissed: onDismissed,
    isNativeStack: true,
    nativeBackButtonDismissalEnabled: false,
    preventNativeDismiss: isRemovePrevented,
    onHeaderBackButtonClicked: onHeaderBackButtonClicked,
    onNativeDismissCancelled: onNativeDismissCancelled
  }, React.createElement(_native.NavigationContext.Provider, {
    value: navigation
  }, React.createElement(_native.NavigationRouteContext.Provider, {
    value: route
  }, React.createElement(_elements.HeaderShownContext.Provider, {
    value: isParentHeaderShown || isHeaderInPush !== false
  }, React.createElement(_elements.HeaderHeightContext.Provider, {
    value: isHeaderInPush !== false ? headerHeight : parentHeaderHeight !== null && parentHeaderHeight !== void 0 ? parentHeaderHeight : 0
  }, header !== undefined && headerShown !== false ? React.createElement(_reactNative.View, {
    onLayout: function onLayout(e) {
      setCustomHeaderHeight(e.nativeEvent.layout.height);
    }
  }, header({
    back: headerBack,
    options: options,
    route: route,
    navigation: navigation
  })) : React.createElement(_HeaderConfig.default, _extends({}, options, {
    route: route,
    headerBackButtonMenuEnabled: isRemovePrevented !== undefined ? !isRemovePrevented : headerBackButtonMenuEnabled,
    headerShown: isHeaderInPush,
    headerHeight: headerHeight,
    headerBackTitle: options.headerBackTitle !== undefined ? options.headerBackTitle : headerBack === null || headerBack === void 0 ? void 0 : headerBack.title,
    canGoBack: headerBack !== undefined
  })), React.createElement(MaybeNestedStack, {
    options: options,
    route: route,
    presentation: presentation,
    headerHeight: headerHeight
  }, React.createElement(_elements.HeaderBackContext.Provider, {
    value: headerBack
  }, render())))))));
};

function NativeStackViewInner(_ref3) {
  var state = _ref3.state,
      navigation = _ref3.navigation,
      descriptors = _ref3.descriptors;

  var _ref6 = (0, _useDismissedRouteError.default)(state),
      setNextDismissedKey = _ref6.setNextDismissedKey;

  (0, _useInvalidPreventRemoveError.default)(descriptors);
  return React.createElement(_reactNativeScreens.ScreenStack, {
    style: styles.container
  }, state.routes.map(function (route, index) {
    var _state$routes, _state$routes2;

    var descriptor = descriptors[route.key];
    var previousKey = (_state$routes = state.routes[index - 1]) === null || _state$routes === void 0 ? void 0 : _state$routes.key;
    var nextKey = (_state$routes2 = state.routes[index + 1]) === null || _state$routes2 === void 0 ? void 0 : _state$routes2.key;
    var previousDescriptor = previousKey ? descriptors[previousKey] : undefined;
    var nextDescriptor = nextKey ? descriptors[nextKey] : undefined;
    return React.createElement(SceneView, {
      key: route.key,
      index: index,
      descriptor: descriptor,
      previousDescriptor: previousDescriptor,
      nextDescriptor: nextDescriptor,
      onWillDisappear: function onWillDisappear() {
        navigation.emit({
          type: 'transitionStart',
          data: {
            closing: true
          },
          target: route.key
        });
      },
      onAppear: function onAppear() {
        navigation.emit({
          type: 'transitionEnd',
          data: {
            closing: false
          },
          target: route.key
        });
      },
      onDisappear: function onDisappear() {
        navigation.emit({
          type: 'transitionEnd',
          data: {
            closing: true
          },
          target: route.key
        });
      },
      onDismissed: function onDismissed(event) {
        navigation.dispatch(Object.assign({}, _native.StackActions.pop(event.nativeEvent.dismissCount), {
          source: route.key,
          target: state.key
        }));
        setNextDismissedKey(route.key);
      },
      onHeaderBackButtonClicked: function onHeaderBackButtonClicked() {
        navigation.dispatch(Object.assign({}, _native.StackActions.pop(), {
          source: route.key,
          target: state.key
        }));
      },
      onNativeDismissCancelled: function onNativeDismissCancelled(event) {
        navigation.dispatch(Object.assign({}, _native.StackActions.pop(event.nativeEvent.dismissCount), {
          source: route.key,
          target: state.key
        }));
      }
    });
  }));
}

function NativeStackView(props) {
  return React.createElement(_elements.SafeAreaProviderCompat, null, React.createElement(NativeStackViewInner, props));
}

var styles = _reactNative.StyleSheet.create({
  container: {
    flex: 1
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFFO0VBREc7QUFEb0IsQ0FBbEJoSCxDQUFmIiwibmFtZXMiOlsiaXNBbmRyb2lkIiwiUGxhdGZvcm0iLCJPUyIsIk1heWJlTmVzdGVkU3RhY2siLCJvcHRpb25zIiwicm91dGUiLCJwcmVzZW50YXRpb24iLCJoZWFkZXJIZWlnaHQiLCJjaGlsZHJlbiIsImNvbG9ycyIsImhlYWRlciIsImhlYWRlclNob3duIiwiY29udGVudFN0eWxlIiwiaXNIZWFkZXJJbk1vZGFsIiwidW5kZWZpbmVkIiwiaGVhZGVyU2hvd25QcmV2aW91c1JlZiIsIlJlYWN0IiwidXNlUmVmIiwidXNlRWZmZWN0IiwiY3VycmVudCIsIm5hbWUiLCJjb250ZW50IiwiX0RlYnVnQ29udGFpbmVyIiwic3R5bGUiLCJzdHlsZXMiLCJjb250YWluZXIiLCJiYWNrZ3JvdW5kQ29sb3IiLCJiYWNrZ3JvdW5kIiwic3RhY2tQcmVzZW50YXRpb24iLCJfcmVhY3ROYXRpdmVTY3JlZW5zIiwiZW5hYmxlZCIsIlN0eWxlU2hlZXQiLCJhYnNvbHV0ZUZpbGwiLCJfSGVhZGVyQ29uZmlnIiwiY2FuR29CYWNrIiwiU2NlbmVWaWV3IiwiZGVzY3JpcHRvciIsInByZXZpb3VzRGVzY3JpcHRvciIsIm5leHREZXNjcmlwdG9yIiwiaW5kZXgiLCJvbldpbGxEaXNhcHBlYXIiLCJvbkFwcGVhciIsIm9uRGlzYXBwZWFyIiwib25EaXNtaXNzZWQiLCJvbkhlYWRlckJhY2tCdXR0b25DbGlja2VkIiwib25OYXRpdmVEaXNtaXNzQ2FuY2VsbGVkIiwibmF2aWdhdGlvbiIsInJlbmRlciIsImFuaW1hdGlvbkR1cmF0aW9uIiwiYW5pbWF0aW9uVHlwZUZvclJlcGxhY2UiLCJnZXN0dXJlRW5hYmxlZCIsImhlYWRlckJhY2tCdXR0b25NZW51RW5hYmxlZCIsImF1dG9IaWRlSG9tZUluZGljYXRvciIsIm5hdmlnYXRpb25CYXJDb2xvciIsIm5hdmlnYXRpb25CYXJIaWRkZW4iLCJvcmllbnRhdGlvbiIsInN0YXR1c0JhckFuaW1hdGlvbiIsInN0YXR1c0JhckhpZGRlbiIsInN0YXR1c0JhclN0eWxlIiwic3RhdHVzQmFyVHJhbnNsdWNlbnQiLCJzdGF0dXNCYXJDb2xvciIsImFuaW1hdGlvbiIsImN1c3RvbUFuaW1hdGlvbk9uR2VzdHVyZSIsImZ1bGxTY3JlZW5HZXN0dXJlRW5hYmxlZCIsImdlc3R1cmVEaXJlY3Rpb24iLCJuZXh0R2VzdHVyZURpcmVjdGlvbiIsImdlc3R1cmVEaXJlY3Rpb25PdmVycmlkZSIsImlzSGVhZGVySW5QdXNoIiwiaW5zZXRzIiwiZnJhbWUiLCJpc01vZGFsIiwiaXNJUGhvbmUiLCJpc1BhZCIsImlzVFZPUyIsImlzTGFuZHNjYXBlIiwid2lkdGgiLCJoZWlnaHQiLCJ0b3BJbnNldCIsInRvcCIsImlzUGFyZW50SGVhZGVyU2hvd24iLCJ1c2VDb250ZXh0IiwiSGVhZGVyU2hvd25Db250ZXh0IiwicGFyZW50SGVhZGVySGVpZ2h0IiwiSGVhZGVySGVpZ2h0Q29udGV4dCIsInBhcmVudEhlYWRlckJhY2siLCJIZWFkZXJCYWNrQ29udGV4dCIsInByZXZlbnRlZFJvdXRlcyIsImRlZmF1bHRIZWFkZXJIZWlnaHQiLCJ1c2VTdGF0ZSIsImN1c3RvbUhlYWRlckhlaWdodCIsInNldEN1c3RvbUhlYWRlckhlaWdodCIsImhlYWRlckJhY2siLCJ0aXRsZSIsImlzUmVtb3ZlUHJldmVudGVkIiwia2V5IiwiX3ByZXZlbnRlZFJvdXRlcyRyb3V0IiwicHJldmVudFJlbW92ZSIsImN1c3RvbUFuaW1hdGlvbk9uU3dpcGUiLCJmdWxsU2NyZWVuU3dpcGVFbmFibGVkIiwiaG9tZUluZGljYXRvckhpZGRlbiIsInJlcGxhY2VBbmltYXRpb24iLCJzdGFja0FuaW1hdGlvbiIsInNjcmVlbk9yaWVudGF0aW9uIiwic3dpcGVEaXJlY3Rpb24iLCJ0cmFuc2l0aW9uRHVyYXRpb24iLCJpc05hdGl2ZVN0YWNrIiwibmF0aXZlQmFja0J1dHRvbkRpc21pc3NhbEVuYWJsZWQiLCJwcmV2ZW50TmF0aXZlRGlzbWlzcyIsIl9uYXRpdmUiLCJQcm92aWRlciIsInZhbHVlIiwiX2VsZW1lbnRzIiwiX3JlYWN0TmF0aXZlIiwib25MYXlvdXQiLCJlIiwibmF0aXZlRXZlbnQiLCJsYXlvdXQiLCJiYWNrIiwiaGVhZGVyQmFja1RpdGxlIiwiTmF0aXZlU3RhY2tWaWV3SW5uZXIiLCJzdGF0ZSIsImRlc2NyaXB0b3JzIiwic2V0TmV4dERpc21pc3NlZEtleSIsInJvdXRlcyIsIm1hcCIsInByZXZpb3VzS2V5IiwiX3N0YXRlJHJvdXRlcyIsIm5leHRLZXkiLCJfc3RhdGUkcm91dGVzMiIsImVtaXQiLCJ0eXBlIiwiZGF0YSIsImNsb3NpbmciLCJ0YXJnZXQiLCJldmVudCIsImRpc3BhdGNoIiwiU3RhY2tBY3Rpb25zIiwicG9wIiwiZGlzbWlzc0NvdW50Iiwic291cmNlIiwiTmF0aXZlU3RhY2tWaWV3IiwicHJvcHMiLCJjcmVhdGUiLCJmbGV4Il0sInNvdXJjZXMiOlsiTmF0aXZlU3RhY2tWaWV3Lm5hdGl2ZS50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgZ2V0RGVmYXVsdEhlYWRlckhlaWdodCxcbiAgZ2V0SGVhZGVyVGl0bGUsXG4gIEhlYWRlckJhY2tDb250ZXh0LFxuICBIZWFkZXJIZWlnaHRDb250ZXh0LFxuICBIZWFkZXJTaG93bkNvbnRleHQsXG4gIFNhZmVBcmVhUHJvdmlkZXJDb21wYXQsXG59IGZyb20gJ0ByZWFjdC1uYXZpZ2F0aW9uL2VsZW1lbnRzJztcbmltcG9ydCB7XG4gIE5hdmlnYXRpb25Db250ZXh0LFxuICBOYXZpZ2F0aW9uUm91dGVDb250ZXh0LFxuICBQYXJhbUxpc3RCYXNlLFxuICBSb3V0ZSxcbiAgU3RhY2tBY3Rpb25zLFxuICBTdGFja05hdmlnYXRpb25TdGF0ZSxcbiAgdXNlUHJldmVudFJlbW92ZUNvbnRleHQsXG4gIHVzZVRoZW1lLFxufSBmcm9tICdAcmVhY3QtbmF2aWdhdGlvbi9uYXRpdmUnO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgUGxhdGZvcm0sIFN0eWxlU2hlZXQsIFZpZXcgfSBmcm9tICdyZWFjdC1uYXRpdmUnO1xuaW1wb3J0IHtcbiAgdXNlU2FmZUFyZWFGcmFtZSxcbiAgdXNlU2FmZUFyZWFJbnNldHMsXG59IGZyb20gJ3JlYWN0LW5hdGl2ZS1zYWZlLWFyZWEtY29udGV4dCc7XG5pbXBvcnQgdHlwZSB7IFNjcmVlblByb3BzIH0gZnJvbSAncmVhY3QtbmF0aXZlLXNjcmVlbnMnO1xuaW1wb3J0IHtcbiAgU2NyZWVuLFxuICBTY3JlZW5TdGFjayxcbiAgU3RhY2tQcmVzZW50YXRpb25UeXBlcyxcbn0gZnJvbSAncmVhY3QtbmF0aXZlLXNjcmVlbnMnO1xuaW1wb3J0IHdhcm5PbmNlIGZyb20gJ3dhcm4tb25jZSc7XG5cbmltcG9ydCB0eXBlIHtcbiAgTmF0aXZlU3RhY2tEZXNjcmlwdG9yLFxuICBOYXRpdmVTdGFja0Rlc2NyaXB0b3JNYXAsXG4gIE5hdGl2ZVN0YWNrTmF2aWdhdGlvbkhlbHBlcnMsXG4gIE5hdGl2ZVN0YWNrTmF2aWdhdGlvbk9wdGlvbnMsXG59IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB1c2VEaXNtaXNzZWRSb3V0ZUVycm9yIGZyb20gJy4uL3V0aWxzL3VzZURpc21pc3NlZFJvdXRlRXJyb3InO1xuaW1wb3J0IHVzZUludmFsaWRQcmV2ZW50UmVtb3ZlRXJyb3IgZnJvbSAnLi4vdXRpbHMvdXNlSW52YWxpZFByZXZlbnRSZW1vdmVFcnJvcic7XG5pbXBvcnQgRGVidWdDb250YWluZXIgZnJvbSAnLi9EZWJ1Z0NvbnRhaW5lcic7XG5pbXBvcnQgSGVhZGVyQ29uZmlnIGZyb20gJy4vSGVhZGVyQ29uZmlnJztcblxuY29uc3QgaXNBbmRyb2lkID0gUGxhdGZvcm0uT1MgPT09ICdhbmRyb2lkJztcblxuY29uc3QgTWF5YmVOZXN0ZWRTdGFjayA9ICh7XG4gIG9wdGlvbnMsXG4gIHJvdXRlLFxuICBwcmVzZW50YXRpb24sXG4gIGhlYWRlckhlaWdodCxcbiAgY2hpbGRyZW4sXG59OiB7XG4gIG9wdGlvbnM6IE5hdGl2ZVN0YWNrTmF2aWdhdGlvbk9wdGlvbnM7XG4gIHJvdXRlOiBSb3V0ZTxzdHJpbmc+O1xuICBwcmVzZW50YXRpb246IEV4Y2x1ZGU8U3RhY2tQcmVzZW50YXRpb25UeXBlcywgJ3B1c2gnPiB8ICdjYXJkJztcbiAgaGVhZGVySGVpZ2h0OiBudW1iZXI7XG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7XG59KSA9PiB7XG4gIGNvbnN0IHsgY29sb3JzIH0gPSB1c2VUaGVtZSgpO1xuICBjb25zdCB7IGhlYWRlciwgaGVhZGVyU2hvd24gPSB0cnVlLCBjb250ZW50U3R5bGUgfSA9IG9wdGlvbnM7XG5cbiAgY29uc3QgaXNIZWFkZXJJbk1vZGFsID0gaXNBbmRyb2lkXG4gICAgPyBmYWxzZVxuICAgIDogcHJlc2VudGF0aW9uICE9PSAnY2FyZCcgJiYgaGVhZGVyU2hvd24gPT09IHRydWUgJiYgaGVhZGVyID09PSB1bmRlZmluZWQ7XG5cbiAgY29uc3QgaGVhZGVyU2hvd25QcmV2aW91c1JlZiA9IFJlYWN0LnVzZVJlZihoZWFkZXJTaG93bik7XG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICB3YXJuT25jZShcbiAgICAgICFpc0FuZHJvaWQgJiZcbiAgICAgICAgcHJlc2VudGF0aW9uICE9PSAnY2FyZCcgJiZcbiAgICAgICAgaGVhZGVyU2hvd25QcmV2aW91c1JlZi5jdXJyZW50ICE9PSBoZWFkZXJTaG93bixcbiAgICAgIGBEeW5hbWljYWxseSBjaGFuZ2luZyAnaGVhZGVyU2hvd24nIGluIG1vZGFscyB3aWxsIHJlc3VsdCBpbiByZW1vdW50aW5nIHRoZSBzY3JlZW4gYW5kIGxvc2luZyBhbGwgbG9jYWwgc3RhdGUuIFNlZSBvcHRpb25zIGZvciB0aGUgc2NyZWVuICcke3JvdXRlLm5hbWV9Jy5gXG4gICAgKTtcblxuICAgIGhlYWRlclNob3duUHJldmlvdXNSZWYuY3VycmVudCA9IGhlYWRlclNob3duO1xuICB9LCBbaGVhZGVyU2hvd24sIHByZXNlbnRhdGlvbiwgcm91dGUubmFtZV0pO1xuXG4gIGNvbnN0IGNvbnRlbnQgPSAoXG4gICAgPERlYnVnQ29udGFpbmVyXG4gICAgICBzdHlsZT17W1xuICAgICAgICBzdHlsZXMuY29udGFpbmVyLFxuICAgICAgICBwcmVzZW50YXRpb24gIT09ICd0cmFuc3BhcmVudE1vZGFsJyAmJlxuICAgICAgICAgIHByZXNlbnRhdGlvbiAhPT0gJ2NvbnRhaW5lZFRyYW5zcGFyZW50TW9kYWwnICYmIHtcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogY29sb3JzLmJhY2tncm91bmQsXG4gICAgICAgICAgfSxcbiAgICAgICAgY29udGVudFN0eWxlLFxuICAgICAgXX1cbiAgICAgIHN0YWNrUHJlc2VudGF0aW9uPXtwcmVzZW50YXRpb24gPT09ICdjYXJkJyA/ICdwdXNoJyA6IHByZXNlbnRhdGlvbn1cbiAgICA+XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9EZWJ1Z0NvbnRhaW5lcj5cbiAgKTtcblxuICBpZiAoaXNIZWFkZXJJbk1vZGFsKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxTY3JlZW5TdGFjayBzdHlsZT17c3R5bGVzLmNvbnRhaW5lcn0+XG4gICAgICAgIDxTY3JlZW4gZW5hYmxlZCBzdHlsZT17U3R5bGVTaGVldC5hYnNvbHV0ZUZpbGx9PlxuICAgICAgICAgIDxIZWFkZXJDb25maWdcbiAgICAgICAgICAgIHsuLi5vcHRpb25zfVxuICAgICAgICAgICAgcm91dGU9e3JvdXRlfVxuICAgICAgICAgICAgaGVhZGVySGVpZ2h0PXtoZWFkZXJIZWlnaHR9XG4gICAgICAgICAgICBjYW5Hb0JhY2tcbiAgICAgICAgICAvPlxuICAgICAgICAgIHtjb250ZW50fVxuICAgICAgICA8L1NjcmVlbj5cbiAgICAgIDwvU2NyZWVuU3RhY2s+XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBjb250ZW50O1xufTtcblxudHlwZSBTY2VuZVZpZXdQcm9wcyA9IHtcbiAgaW5kZXg6IG51bWJlcjtcbiAgZGVzY3JpcHRvcjogTmF0aXZlU3RhY2tEZXNjcmlwdG9yO1xuICBwcmV2aW91c0Rlc2NyaXB0b3I/OiBOYXRpdmVTdGFja0Rlc2NyaXB0b3I7XG4gIG5leHREZXNjcmlwdG9yPzogTmF0aXZlU3RhY2tEZXNjcmlwdG9yO1xuICBvbldpbGxEaXNhcHBlYXI6ICgpID0+IHZvaWQ7XG4gIG9uQXBwZWFyOiAoKSA9PiB2b2lkO1xuICBvbkRpc2FwcGVhcjogKCkgPT4gdm9pZDtcbiAgb25EaXNtaXNzZWQ6IFNjcmVlblByb3BzWydvbkRpc21pc3NlZCddO1xuICBvbkhlYWRlckJhY2tCdXR0b25DbGlja2VkOiAoKSA9PiB2b2lkO1xuICBvbk5hdGl2ZURpc21pc3NDYW5jZWxsZWQ6IFNjcmVlblByb3BzWydvbkRpc21pc3NlZCddO1xufTtcblxuY29uc3QgU2NlbmVWaWV3ID0gKHtcbiAgZGVzY3JpcHRvcixcbiAgcHJldmlvdXNEZXNjcmlwdG9yLFxuICBuZXh0RGVzY3JpcHRvcixcbiAgaW5kZXgsXG4gIG9uV2lsbERpc2FwcGVhcixcbiAgb25BcHBlYXIsXG4gIG9uRGlzYXBwZWFyLFxuICBvbkRpc21pc3NlZCxcbiAgb25IZWFkZXJCYWNrQnV0dG9uQ2xpY2tlZCxcbiAgb25OYXRpdmVEaXNtaXNzQ2FuY2VsbGVkLFxufTogU2NlbmVWaWV3UHJvcHMpID0+IHtcbiAgY29uc3QgeyByb3V0ZSwgbmF2aWdhdGlvbiwgb3B0aW9ucywgcmVuZGVyIH0gPSBkZXNjcmlwdG9yO1xuICBjb25zdCB7XG4gICAgYW5pbWF0aW9uRHVyYXRpb24sXG4gICAgYW5pbWF0aW9uVHlwZUZvclJlcGxhY2UgPSAncHVzaCcsXG4gICAgZ2VzdHVyZUVuYWJsZWQsXG4gICAgaGVhZGVyLFxuICAgIGhlYWRlckJhY2tCdXR0b25NZW51RW5hYmxlZCxcbiAgICBoZWFkZXJTaG93bixcbiAgICBhdXRvSGlkZUhvbWVJbmRpY2F0b3IsXG4gICAgbmF2aWdhdGlvbkJhckNvbG9yLFxuICAgIG5hdmlnYXRpb25CYXJIaWRkZW4sXG4gICAgb3JpZW50YXRpb24sXG4gICAgc3RhdHVzQmFyQW5pbWF0aW9uLFxuICAgIHN0YXR1c0JhckhpZGRlbixcbiAgICBzdGF0dXNCYXJTdHlsZSxcbiAgICBzdGF0dXNCYXJUcmFuc2x1Y2VudCxcbiAgICBzdGF0dXNCYXJDb2xvcixcbiAgfSA9IG9wdGlvbnM7XG5cbiAgbGV0IHtcbiAgICBhbmltYXRpb24sXG4gICAgY3VzdG9tQW5pbWF0aW9uT25HZXN0dXJlLFxuICAgIGZ1bGxTY3JlZW5HZXN0dXJlRW5hYmxlZCxcbiAgICBwcmVzZW50YXRpb24gPSAnY2FyZCcsXG4gICAgZ2VzdHVyZURpcmVjdGlvbiA9IHByZXNlbnRhdGlvbiA9PT0gJ2NhcmQnID8gJ2hvcml6b250YWwnIDogJ3ZlcnRpY2FsJyxcbiAgfSA9IG9wdGlvbnM7XG5cbiAgaWYgKGdlc3R1cmVEaXJlY3Rpb24gPT09ICd2ZXJ0aWNhbCcgJiYgUGxhdGZvcm0uT1MgPT09ICdpb3MnKSB7XG4gICAgLy8gZm9yIGB2ZXJ0aWNhbGAgZGlyZWN0aW9uIHRvIHdvcmssIHdlIG5lZWQgdG8gc2V0IGBmdWxsU2NyZWVuR2VzdHVyZUVuYWJsZWRgIHRvIGB0cnVlYFxuICAgIC8vIHNvIHRoZSBzY3JlZW4gY2FuIGJlIGRpc21pc3NlZCBmcm9tIGFueSBwb2ludCBvbiBzY3JlZW4uXG4gICAgLy8gYGN1c3RvbUFuaW1hdGlvbk9uR2VzdHVyZWAgbmVlZHMgdG8gYmUgc2V0IHRvIGB0cnVlYCBzbyB0aGUgYGFuaW1hdGlvbmAgc2V0IGJ5IHVzZXIgY2FuIGJlIHVzZWQsXG4gICAgLy8gb3RoZXJ3aXNlIGBzaW1wbGVfcHVzaGAgd2lsbCBiZSB1c2VkLlxuICAgIC8vIEFsc28sIHRoZSBkZWZhdWx0IGFuaW1hdGlvbiBmb3IgdGhpcyBkaXJlY3Rpb24gc2VlbXMgdG8gYmUgYHNsaWRlX2Zyb21fYm90dG9tYC5cbiAgICBpZiAoZnVsbFNjcmVlbkdlc3R1cmVFbmFibGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGZ1bGxTY3JlZW5HZXN0dXJlRW5hYmxlZCA9IHRydWU7XG4gICAgfVxuICAgIGlmIChjdXN0b21BbmltYXRpb25Pbkdlc3R1cmUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgY3VzdG9tQW5pbWF0aW9uT25HZXN0dXJlID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGFuaW1hdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBhbmltYXRpb24gPSAnc2xpZGVfZnJvbV9ib3R0b20nO1xuICAgIH1cbiAgfVxuXG4gIC8vIHdvcmthcm91bmQgZm9yIHJuLXNjcmVlbnMgd2hlcmUgZ2VzdHVyZURpcmVjdGlvbiBoYXMgdG8gYmUgc2V0IG9uIGJvdGhcbiAgLy8gY3VycmVudCBhbmQgcHJldmlvdXMgc2NyZWVuIC0gc29mdHdhcmUtbWFuc2lvbi9yZWFjdC1uYXRpdmUtc2NyZWVucy9wdWxsLzE1MDlcbiAgY29uc3QgbmV4dEdlc3R1cmVEaXJlY3Rpb24gPSBuZXh0RGVzY3JpcHRvcj8ub3B0aW9ucy5nZXN0dXJlRGlyZWN0aW9uO1xuICBjb25zdCBnZXN0dXJlRGlyZWN0aW9uT3ZlcnJpZGUgPVxuICAgIG5leHRHZXN0dXJlRGlyZWN0aW9uICE9IG51bGwgPyBuZXh0R2VzdHVyZURpcmVjdGlvbiA6IGdlc3R1cmVEaXJlY3Rpb247XG5cbiAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgLy8gZmlyc3Qgc2NyZWVuIHNob3VsZCBhbHdheXMgYmUgdHJlYXRlZCBhcyBgY2FyZGAsIGl0IHJlc29sdmVzIHByb2JsZW1zIHdpdGggbm8gaGVhZGVyIGFuaW1hdGlvblxuICAgIC8vIGZvciBuYXZpZ2F0b3Igd2l0aCBmaXJzdCBzY3JlZW4gYXMgYG1vZGFsYCBhbmQgdGhlIG5leHQgYXMgYGNhcmRgXG4gICAgcHJlc2VudGF0aW9uID0gJ2NhcmQnO1xuICB9XG5cbiAgY29uc3QgaXNIZWFkZXJJblB1c2ggPSBpc0FuZHJvaWRcbiAgICA/IGhlYWRlclNob3duXG4gICAgOiBwcmVzZW50YXRpb24gPT09ICdjYXJkJyAmJiBoZWFkZXJTaG93biAhPT0gZmFsc2U7XG5cbiAgY29uc3QgaW5zZXRzID0gdXNlU2FmZUFyZWFJbnNldHMoKTtcbiAgY29uc3QgZnJhbWUgPSB1c2VTYWZlQXJlYUZyYW1lKCk7XG5cbiAgLy8gYG1vZGFsYCBhbmQgYGZvcm1TaGVldGAgcHJlc2VudGF0aW9ucyBkbyBub3QgdGFrZSB3aG9sZSBzY3JlZW4sIHNvIHNob3VsZCBub3QgdGFrZSB0aGUgaW5zZXQuXG4gIGNvbnN0IGlzTW9kYWwgPSBwcmVzZW50YXRpb24gPT09ICdtb2RhbCcgfHwgcHJlc2VudGF0aW9uID09PSAnZm9ybVNoZWV0JztcblxuICAvLyBNb2RhbHMgYXJlIGZ1bGxzY3JlZW4gaW4gbGFuZHNjYXBlIG9ubHkgb24gaVBob25lXG4gIGNvbnN0IGlzSVBob25lID1cbiAgICBQbGF0Zm9ybS5PUyA9PT0gJ2lvcycgJiYgIShQbGF0Zm9ybS5pc1BhZCB8fCBQbGF0Zm9ybS5pc1RWT1MpO1xuICBjb25zdCBpc0xhbmRzY2FwZSA9IGZyYW1lLndpZHRoID4gZnJhbWUuaGVpZ2h0O1xuXG4gIGNvbnN0IHRvcEluc2V0ID0gaXNNb2RhbCB8fCAoaXNJUGhvbmUgJiYgaXNMYW5kc2NhcGUpID8gMCA6IGluc2V0cy50b3A7XG5cbiAgY29uc3QgaXNQYXJlbnRIZWFkZXJTaG93biA9IFJlYWN0LnVzZUNvbnRleHQoSGVhZGVyU2hvd25Db250ZXh0KTtcbiAgY29uc3QgcGFyZW50SGVhZGVySGVpZ2h0ID0gUmVhY3QudXNlQ29udGV4dChIZWFkZXJIZWlnaHRDb250ZXh0KTtcbiAgY29uc3QgcGFyZW50SGVhZGVyQmFjayA9IFJlYWN0LnVzZUNvbnRleHQoSGVhZGVyQmFja0NvbnRleHQpO1xuXG4gIGNvbnN0IHsgcHJldmVudGVkUm91dGVzIH0gPSB1c2VQcmV2ZW50UmVtb3ZlQ29udGV4dCgpO1xuXG4gIGNvbnN0IGRlZmF1bHRIZWFkZXJIZWlnaHQgPSBnZXREZWZhdWx0SGVhZGVySGVpZ2h0KGZyYW1lLCBpc01vZGFsLCB0b3BJbnNldCk7XG5cbiAgY29uc3QgW2N1c3RvbUhlYWRlckhlaWdodCwgc2V0Q3VzdG9tSGVhZGVySGVpZ2h0XSA9XG4gICAgUmVhY3QudXNlU3RhdGUoZGVmYXVsdEhlYWRlckhlaWdodCk7XG5cbiAgY29uc3QgaGVhZGVySGVpZ2h0ID0gaGVhZGVyID8gY3VzdG9tSGVhZGVySGVpZ2h0IDogZGVmYXVsdEhlYWRlckhlaWdodDtcbiAgY29uc3QgaGVhZGVyQmFjayA9IHByZXZpb3VzRGVzY3JpcHRvclxuICAgID8ge1xuICAgICAgICB0aXRsZTogZ2V0SGVhZGVyVGl0bGUoXG4gICAgICAgICAgcHJldmlvdXNEZXNjcmlwdG9yLm9wdGlvbnMsXG4gICAgICAgICAgcHJldmlvdXNEZXNjcmlwdG9yLnJvdXRlLm5hbWVcbiAgICAgICAgKSxcbiAgICAgIH1cbiAgICA6IHBhcmVudEhlYWRlckJhY2s7XG5cbiAgY29uc3QgaXNSZW1vdmVQcmV2ZW50ZWQgPSBwcmV2ZW50ZWRSb3V0ZXNbcm91dGUua2V5XT8ucHJldmVudFJlbW92ZTtcblxuICByZXR1cm4gKFxuICAgIDxTY3JlZW5cbiAgICAgIGtleT17cm91dGUua2V5fVxuICAgICAgZW5hYmxlZFxuICAgICAgc3R5bGU9e1N0eWxlU2hlZXQuYWJzb2x1dGVGaWxsfVxuICAgICAgY3VzdG9tQW5pbWF0aW9uT25Td2lwZT17Y3VzdG9tQW5pbWF0aW9uT25HZXN0dXJlfVxuICAgICAgZnVsbFNjcmVlblN3aXBlRW5hYmxlZD17ZnVsbFNjcmVlbkdlc3R1cmVFbmFibGVkfVxuICAgICAgZ2VzdHVyZUVuYWJsZWQ9e1xuICAgICAgICBpc0FuZHJvaWRcbiAgICAgICAgICA/IC8vIFRoaXMgcHJvcCBlbmFibGVzIGhhbmRsaW5nIG9mIHN5c3RlbSBiYWNrIGdlc3R1cmVzIG9uIEFuZHJvaWRcbiAgICAgICAgICAgIC8vIFNpbmNlIHdlIGhhbmRsZSB0aGVtIGluIEpTIHNpZGUsIHdlIGRpc2FibGUgdGhpc1xuICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICA6IGdlc3R1cmVFbmFibGVkXG4gICAgICB9XG4gICAgICBob21lSW5kaWNhdG9ySGlkZGVuPXthdXRvSGlkZUhvbWVJbmRpY2F0b3J9XG4gICAgICBuYXZpZ2F0aW9uQmFyQ29sb3I9e25hdmlnYXRpb25CYXJDb2xvcn1cbiAgICAgIG5hdmlnYXRpb25CYXJIaWRkZW49e25hdmlnYXRpb25CYXJIaWRkZW59XG4gICAgICByZXBsYWNlQW5pbWF0aW9uPXthbmltYXRpb25UeXBlRm9yUmVwbGFjZX1cbiAgICAgIHN0YWNrUHJlc2VudGF0aW9uPXtwcmVzZW50YXRpb24gPT09ICdjYXJkJyA/ICdwdXNoJyA6IHByZXNlbnRhdGlvbn1cbiAgICAgIHN0YWNrQW5pbWF0aW9uPXthbmltYXRpb259XG4gICAgICBzY3JlZW5PcmllbnRhdGlvbj17b3JpZW50YXRpb259XG4gICAgICBzdGF0dXNCYXJBbmltYXRpb249e3N0YXR1c0JhckFuaW1hdGlvbn1cbiAgICAgIHN0YXR1c0JhckhpZGRlbj17c3RhdHVzQmFySGlkZGVufVxuICAgICAgc3RhdHVzQmFyU3R5bGU9e3N0YXR1c0JhclN0eWxlfVxuICAgICAgc3RhdHVzQmFyQ29sb3I9e3N0YXR1c0JhckNvbG9yfVxuICAgICAgc3RhdHVzQmFyVHJhbnNsdWNlbnQ9e3N0YXR1c0JhclRyYW5zbHVjZW50fVxuICAgICAgc3dpcGVEaXJlY3Rpb249e2dlc3R1cmVEaXJlY3Rpb25PdmVycmlkZX1cbiAgICAgIHRyYW5zaXRpb25EdXJhdGlvbj17YW5pbWF0aW9uRHVyYXRpb259XG4gICAgICBvbldpbGxEaXNhcHBlYXI9e29uV2lsbERpc2FwcGVhcn1cbiAgICAgIG9uQXBwZWFyPXtvbkFwcGVhcn1cbiAgICAgIG9uRGlzYXBwZWFyPXtvbkRpc2FwcGVhcn1cbiAgICAgIG9uRGlzbWlzc2VkPXtvbkRpc21pc3NlZH1cbiAgICAgIGlzTmF0aXZlU3RhY2tcbiAgICAgIC8vIFByb3BzIGZvciBlbmFibGluZyBwcmV2ZW50aW5nIHJlbW92YWwgaW4gbmF0aXZlLXN0YWNrXG4gICAgICBuYXRpdmVCYWNrQnV0dG9uRGlzbWlzc2FsRW5hYmxlZD17ZmFsc2V9IC8vIG9uIEFuZHJvaWRcbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgcHJvcCBub3QgcHVibGljbHkgZXhwb3J0ZWQgZnJvbSBybi1zY3JlZW5zXG4gICAgICBwcmV2ZW50TmF0aXZlRGlzbWlzcz17aXNSZW1vdmVQcmV2ZW50ZWR9IC8vIG9uIGlPU1xuICAgICAgb25IZWFkZXJCYWNrQnV0dG9uQ2xpY2tlZD17b25IZWFkZXJCYWNrQnV0dG9uQ2xpY2tlZH1cbiAgICAgIG9uTmF0aXZlRGlzbWlzc0NhbmNlbGxlZD17b25OYXRpdmVEaXNtaXNzQ2FuY2VsbGVkfVxuICAgID5cbiAgICAgIDxOYXZpZ2F0aW9uQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17bmF2aWdhdGlvbn0+XG4gICAgICAgIDxOYXZpZ2F0aW9uUm91dGVDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtyb3V0ZX0+XG4gICAgICAgICAgPEhlYWRlclNob3duQ29udGV4dC5Qcm92aWRlclxuICAgICAgICAgICAgdmFsdWU9e2lzUGFyZW50SGVhZGVyU2hvd24gfHwgaXNIZWFkZXJJblB1c2ggIT09IGZhbHNlfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxIZWFkZXJIZWlnaHRDb250ZXh0LlByb3ZpZGVyXG4gICAgICAgICAgICAgIHZhbHVlPXtcbiAgICAgICAgICAgICAgICBpc0hlYWRlckluUHVzaCAhPT0gZmFsc2VcbiAgICAgICAgICAgICAgICAgID8gaGVhZGVySGVpZ2h0XG4gICAgICAgICAgICAgICAgICA6IHBhcmVudEhlYWRlckhlaWdodCA/PyAwXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge2hlYWRlciAhPT0gdW5kZWZpbmVkICYmIGhlYWRlclNob3duICE9PSBmYWxzZSA/IChcbiAgICAgICAgICAgICAgICA8Vmlld1xuICAgICAgICAgICAgICAgICAgb25MYXlvdXQ9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldEN1c3RvbUhlYWRlckhlaWdodChlLm5hdGl2ZUV2ZW50LmxheW91dC5oZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7aGVhZGVyKHtcbiAgICAgICAgICAgICAgICAgICAgYmFjazogaGVhZGVyQmFjayxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgcm91dGUsXG4gICAgICAgICAgICAgICAgICAgIG5hdmlnYXRpb24sXG4gICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICA8L1ZpZXc+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPEhlYWRlckNvbmZpZ1xuICAgICAgICAgICAgICAgICAgey4uLm9wdGlvbnN9XG4gICAgICAgICAgICAgICAgICByb3V0ZT17cm91dGV9XG4gICAgICAgICAgICAgICAgICBoZWFkZXJCYWNrQnV0dG9uTWVudUVuYWJsZWQ9e1xuICAgICAgICAgICAgICAgICAgICBpc1JlbW92ZVByZXZlbnRlZCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgPyAhaXNSZW1vdmVQcmV2ZW50ZWRcbiAgICAgICAgICAgICAgICAgICAgICA6IGhlYWRlckJhY2tCdXR0b25NZW51RW5hYmxlZFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgaGVhZGVyU2hvd249e2lzSGVhZGVySW5QdXNofVxuICAgICAgICAgICAgICAgICAgaGVhZGVySGVpZ2h0PXtoZWFkZXJIZWlnaHR9XG4gICAgICAgICAgICAgICAgICBoZWFkZXJCYWNrVGl0bGU9e1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmhlYWRlckJhY2tUaXRsZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgPyBvcHRpb25zLmhlYWRlckJhY2tUaXRsZVxuICAgICAgICAgICAgICAgICAgICAgIDogaGVhZGVyQmFjaz8udGl0bGVcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGNhbkdvQmFjaz17aGVhZGVyQmFjayAhPT0gdW5kZWZpbmVkfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDxNYXliZU5lc3RlZFN0YWNrXG4gICAgICAgICAgICAgICAgb3B0aW9ucz17b3B0aW9uc31cbiAgICAgICAgICAgICAgICByb3V0ZT17cm91dGV9XG4gICAgICAgICAgICAgICAgcHJlc2VudGF0aW9uPXtwcmVzZW50YXRpb259XG4gICAgICAgICAgICAgICAgaGVhZGVySGVpZ2h0PXtoZWFkZXJIZWlnaHR9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8SGVhZGVyQmFja0NvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2hlYWRlckJhY2t9PlxuICAgICAgICAgICAgICAgICAge3JlbmRlcigpfVxuICAgICAgICAgICAgICAgIDwvSGVhZGVyQmFja0NvbnRleHQuUHJvdmlkZXI+XG4gICAgICAgICAgICAgIDwvTWF5YmVOZXN0ZWRTdGFjaz5cbiAgICAgICAgICAgIDwvSGVhZGVySGVpZ2h0Q29udGV4dC5Qcm92aWRlcj5cbiAgICAgICAgICA8L0hlYWRlclNob3duQ29udGV4dC5Qcm92aWRlcj5cbiAgICAgICAgPC9OYXZpZ2F0aW9uUm91dGVDb250ZXh0LlByb3ZpZGVyPlxuICAgICAgPC9OYXZpZ2F0aW9uQ29udGV4dC5Qcm92aWRlcj5cbiAgICA8L1NjcmVlbj5cbiAgKTtcbn07XG5cbnR5cGUgUHJvcHMgPSB7XG4gIHN0YXRlOiBTdGFja05hdmlnYXRpb25TdGF0ZTxQYXJhbUxpc3RCYXNlPjtcbiAgbmF2aWdhdGlvbjogTmF0aXZlU3RhY2tOYXZpZ2F0aW9uSGVscGVycztcbiAgZGVzY3JpcHRvcnM6IE5hdGl2ZVN0YWNrRGVzY3JpcHRvck1hcDtcbn07XG5cbmZ1bmN0aW9uIE5hdGl2ZVN0YWNrVmlld0lubmVyKHsgc3RhdGUsIG5hdmlnYXRpb24sIGRlc2NyaXB0b3JzIH06IFByb3BzKSB7XG4gIGNvbnN0IHsgc2V0TmV4dERpc21pc3NlZEtleSB9ID0gdXNlRGlzbWlzc2VkUm91dGVFcnJvcihzdGF0ZSk7XG5cbiAgdXNlSW52YWxpZFByZXZlbnRSZW1vdmVFcnJvcihkZXNjcmlwdG9ycyk7XG5cbiAgcmV0dXJuIChcbiAgICA8U2NyZWVuU3RhY2sgc3R5bGU9e3N0eWxlcy5jb250YWluZXJ9PlxuICAgICAge3N0YXRlLnJvdXRlcy5tYXAoKHJvdXRlLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBkZXNjcmlwdG9yID0gZGVzY3JpcHRvcnNbcm91dGUua2V5XTtcbiAgICAgICAgY29uc3QgcHJldmlvdXNLZXkgPSBzdGF0ZS5yb3V0ZXNbaW5kZXggLSAxXT8ua2V5O1xuICAgICAgICBjb25zdCBuZXh0S2V5ID0gc3RhdGUucm91dGVzW2luZGV4ICsgMV0/LmtleTtcbiAgICAgICAgY29uc3QgcHJldmlvdXNEZXNjcmlwdG9yID0gcHJldmlvdXNLZXlcbiAgICAgICAgICA/IGRlc2NyaXB0b3JzW3ByZXZpb3VzS2V5XVxuICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBuZXh0RGVzY3JpcHRvciA9IG5leHRLZXkgPyBkZXNjcmlwdG9yc1tuZXh0S2V5XSA6IHVuZGVmaW5lZDtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxTY2VuZVZpZXdcbiAgICAgICAgICAgIGtleT17cm91dGUua2V5fVxuICAgICAgICAgICAgaW5kZXg9e2luZGV4fVxuICAgICAgICAgICAgZGVzY3JpcHRvcj17ZGVzY3JpcHRvcn1cbiAgICAgICAgICAgIHByZXZpb3VzRGVzY3JpcHRvcj17cHJldmlvdXNEZXNjcmlwdG9yfVxuICAgICAgICAgICAgbmV4dERlc2NyaXB0b3I9e25leHREZXNjcmlwdG9yfVxuICAgICAgICAgICAgb25XaWxsRGlzYXBwZWFyPXsoKSA9PiB7XG4gICAgICAgICAgICAgIG5hdmlnYXRpb24uZW1pdCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3RyYW5zaXRpb25TdGFydCcsXG4gICAgICAgICAgICAgICAgZGF0YTogeyBjbG9zaW5nOiB0cnVlIH0sXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiByb3V0ZS5rZXksXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIG9uQXBwZWFyPXsoKSA9PiB7XG4gICAgICAgICAgICAgIG5hdmlnYXRpb24uZW1pdCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3RyYW5zaXRpb25FbmQnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHsgY2xvc2luZzogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHJvdXRlLmtleSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgb25EaXNhcHBlYXI9eygpID0+IHtcbiAgICAgICAgICAgICAgbmF2aWdhdGlvbi5lbWl0KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAndHJhbnNpdGlvbkVuZCcsXG4gICAgICAgICAgICAgICAgZGF0YTogeyBjbG9zaW5nOiB0cnVlIH0sXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiByb3V0ZS5rZXksXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIG9uRGlzbWlzc2VkPXsoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgbmF2aWdhdGlvbi5kaXNwYXRjaCh7XG4gICAgICAgICAgICAgICAgLi4uU3RhY2tBY3Rpb25zLnBvcChldmVudC5uYXRpdmVFdmVudC5kaXNtaXNzQ291bnQpLFxuICAgICAgICAgICAgICAgIHNvdXJjZTogcm91dGUua2V5LFxuICAgICAgICAgICAgICAgIHRhcmdldDogc3RhdGUua2V5LFxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBzZXROZXh0RGlzbWlzc2VkS2V5KHJvdXRlLmtleSk7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgb25IZWFkZXJCYWNrQnV0dG9uQ2xpY2tlZD17KCkgPT4ge1xuICAgICAgICAgICAgICBuYXZpZ2F0aW9uLmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICAuLi5TdGFja0FjdGlvbnMucG9wKCksXG4gICAgICAgICAgICAgICAgc291cmNlOiByb3V0ZS5rZXksXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiBzdGF0ZS5rZXksXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIG9uTmF0aXZlRGlzbWlzc0NhbmNlbGxlZD17KGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgIG5hdmlnYXRpb24uZGlzcGF0Y2goe1xuICAgICAgICAgICAgICAgIC4uLlN0YWNrQWN0aW9ucy5wb3AoZXZlbnQubmF0aXZlRXZlbnQuZGlzbWlzc0NvdW50KSxcbiAgICAgICAgICAgICAgICBzb3VyY2U6IHJvdXRlLmtleSxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHN0YXRlLmtleSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgIC8+XG4gICAgICAgICk7XG4gICAgICB9KX1cbiAgICA8L1NjcmVlblN0YWNrPlxuICApO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBOYXRpdmVTdGFja1ZpZXcocHJvcHM6IFByb3BzKSB7XG4gIHJldHVybiAoXG4gICAgPFNhZmVBcmVhUHJvdmlkZXJDb21wYXQ+XG4gICAgICA8TmF0aXZlU3RhY2tWaWV3SW5uZXIgey4uLnByb3BzfSAvPlxuICAgIDwvU2FmZUFyZWFQcm92aWRlckNvbXBhdD5cbiAgKTtcbn1cblxuY29uc3Qgc3R5bGVzID0gU3R5bGVTaGVldC5jcmVhdGUoe1xuICBjb250YWluZXI6IHtcbiAgICBmbGV4OiAxLFxuICB9LFxufSk7XG4iXX0=